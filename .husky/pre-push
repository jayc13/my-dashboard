#!/usr/bin/env sh
export HNVM_PNPM=10.17.1

echo "🧪 Running pre-push checks..."

cd "$(git rev-parse --show-toplevel)" || exit

echo "🔬 Running tests..."
  pnpm -r --if-present run test

  if [ $? -eq 0 ]; then
    echo "✅ All tests passed!"
  else
    echo "❌ Tests failed! Please fix failing tests before pushing."
    exit 1
  fi

echo "✅ Pre-push checks completed successfully!"
