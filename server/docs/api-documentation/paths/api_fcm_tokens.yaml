get:
  tags:
    - FCM
  summary: Get all registered device tokens (debugging)
  description: |
    Retrieve all currently registered FCM device tokens. This endpoint is primarily intended for debugging and administrative purposes.
    
    **Use Cases:**
    - **Debugging:** Verify which devices are registered for notifications
    - **Monitoring:** Check the number of active devices
    - **Administration:** Audit device registration status
    - **Analytics:** Track user engagement through device registrations
    
    **Security Note:**
    - This endpoint exposes device tokens which are sensitive information
    - Should be used carefully and potentially restricted to admin users only
    - Tokens are ordered by last_used timestamp (most recent first)
    
    **Token Management:**
    - Invalid/expired tokens are automatically removed during notification sending
    - Tokens are updated with last_used timestamp when devices re-register
    - Consider implementing token cleanup for inactive devices
  responses:
    '200':
      description: Successfully retrieved device tokens
      content:
        application/json:
          schema:
            $ref: '../schemas/FCMTokensResponse.yaml'
          examples:
            with_tokens:
              summary: Response with registered tokens
              value:
                tokens:
                  - "dGhpcyBpcyBhIGZha2UgZmNtIHRva2VuIGZvciBkb2N1bWVudGF0aW9u"
                  - "YW5vdGhlciBmYWtlIGZjbSB0b2tlbiBmb3IgZG9jdW1lbnRhdGlvbg=="
                  - "dGhpcmQgZmFrZSBmY20gdG9rZW4gZm9yIGRvY3VtZW50YXRpb24="
                count: 3
            no_tokens:
              summary: No registered tokens
              value:
                tokens: []
                count: 0
    '401':
      description: Unauthorized - Invalid or missing API key
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
    '500':
      description: Internal server error - Database error
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
          examples:
            database_error:
              summary: Database connection error
              value:
                error: "Internal server error"
  security:
    - ApiKeyAuth: []
