post:
  tags:
    - FCM
  summary: Unregister device token
  description: |
    Remove a Firebase Cloud Messaging (FCM) device token from the system to stop receiving push notifications.
    
    **Use Cases:**
    - User logs out of the application
    - User disables push notifications in settings
    - App is uninstalled (though this should be handled automatically)
    - Device token becomes invalid or expired
    
    **Behavior:**
    - Removes the token from the database immediately
    - No error if the token doesn't exist (idempotent operation)
    - Device will no longer receive push notifications
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../schemas/FCMTokenRequest.yaml'
        examples:
          unregister_token:
            summary: Unregister a device token
            value:
              token: "dGhpcyBpcyBhIGZha2UgZmNtIHRva2VuIGZvciBkb2N1bWVudGF0aW9u"
  responses:
    '200':
      description: Device token unregistered successfully
      content:
        application/json:
          schema:
            $ref: '../schemas/FCMTokenResponse.yaml'
          examples:
            success:
              summary: Successful unregistration
              value:
                message: "Device token unregistered successfully"
    '400':
      description: Bad request - Device token is required
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
          examples:
            missing_token:
              summary: Missing device token
              value:
                error: "Device token is required"
    '401':
      description: Unauthorized - Invalid or missing API key
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
    '500':
      description: Internal server error - Database error
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
          examples:
            unregistration_failed:
              summary: Unregistration failed
              value:
                error: "Failed to unregister device token"
            server_error:
              summary: Internal server error
              value:
                error: "Internal server error"
  security:
    - ApiKeyAuth: []
