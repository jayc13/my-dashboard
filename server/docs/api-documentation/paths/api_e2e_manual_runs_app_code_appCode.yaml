get:
  tags:
    - E2E Manual Runs
  summary: Get E2E manual runs by application code
  description: |
    Retrieve all E2E manual runs for a specific application using its code instead of ID, 
    with optional date range filtering. Results are ordered by creation date (most recent first).
    
    **Use Cases:**
    - More user-friendly API access using application codes
    - Integration with external systems that use app codes
    - Consistent filtering and reporting across different access methods
    
    **Workflow:**
    1. Looks up the application by its code
    2. If found, retrieves all E2E runs for that application
    3. Applies optional date range filtering
    4. Returns empty array if application code doesn't exist
    
    **Date Filtering:**
    - Same filtering options as the app ID endpoint
    - Use `from` and `to` query parameters for date range filtering
    - Dates should be in ISO 8601 format (YYYY-MM-DD or full datetime)
  parameters:
    - name: appCode
      in: path
      required: true
      description: The unique code identifier of the application
      schema:
        type: string
        example: "my-web-app"
    - name: from
      in: query
      required: false
      description: Start date for filtering runs (inclusive, ISO 8601 format)
      schema:
        type: string
        format: date
        example: "2024-01-15"
    - name: to
      in: query
      required: false
      description: End date for filtering runs (inclusive, ISO 8601 format)
      schema:
        type: string
        format: date
        example: "2024-01-20"
  responses:
    '200':
      description: Successfully retrieved E2E manual runs for the application
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '../schemas/E2EManualRun.yaml'
          examples:
            with_runs:
              summary: Response with runs for app code
              value:
                - id: 127
                  app_id: 5
                  pipeline_id: "e5f6g7h8-i9j0-1234-efgh-567890123456"
                  created_at: "2024-01-19T16:45:00.000Z"
                - id: 125
                  app_id: 5
                  pipeline_id: "c3d4e5f6-g7h8-9012-cdef-345678901234"
                  created_at: "2024-01-18T14:20:00.000Z"
            no_runs:
              summary: No runs found (app exists but no runs)
              value: []
            app_not_found:
              summary: Application code not found
              value: []
    '400':
      description: Bad request - App code is required
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
          examples:
            missing_code:
              summary: Missing app code
              value:
                error: "App code is required"
    '401':
      description: Unauthorized - Invalid or missing API key
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
    '500':
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '../schemas/ErrorResponse.yaml'
          examples:
            fetch_error:
              summary: Database error during fetch
              value:
                error: "Failed to fetch e2e manual runs for app code"
  security:
    - ApiKeyAuth: []
